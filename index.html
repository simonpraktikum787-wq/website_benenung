<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Handout-Verwaltung</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      min-height: 100vh;
      background: #111;
      color: #e8ddd0;
      font-family: 'Segoe UI', sans-serif;
      position: relative;
      overflow-x: hidden;
    }

    /* Grain-Overlay */
    body::before {
      content: '';
      position: fixed; inset: 0;
      pointer-events: none; z-index: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
      background-size: 256px 256px;
    }

    /* Glow oben */
    body::after {
      content: '';
      position: fixed; top: -120px; left: 50%; transform: translateX(-50%);
      width: 600px; height: 300px; border-radius: 50%;
      background: radial-gradient(ellipse, rgba(245,158,11,0.13) 0%, transparent 70%);
      pointer-events: none; z-index: 0;
    }

    .container {
      position: relative; z-index: 1;
      max-width: 680px; margin: 0 auto;
      padding: 40px 24px 60px;
    }

    /* â”€â”€ Header â”€â”€ */
    .header { text-align: center; margin-bottom: 36px; }
    .header-badge {
      display: inline-block;
      font-family: 'Courier New', monospace; font-size: 11px;
      letter-spacing: 3px; color: #f59e0b; text-transform: uppercase;
      padding: 4px 14px; border: 1px solid rgba(245,158,11,0.3); border-radius: 20px;
      margin-bottom: 10px;
    }
    .header h1 { font-size: 28px; font-weight: 700; color: #f0e6d0; letter-spacing: -0.5px; }
    .header h1 span { color: #f59e0b; }
    .header p { font-size: 13px; color: #666; margin-top: 8px; max-width: 440px; margin-left: auto; margin-right: auto; }

    /* â”€â”€ Schema-Box â”€â”€ */
    .schema-box {
      background: rgba(245,158,11,0.06);
      border: 1px solid rgba(245,158,11,0.18);
      border-radius: 10px; padding: 14px 18px; margin-bottom: 30px;
    }
    .schema-box .label {
      font-size: 11px; color: #f59e0b; font-weight: 700;
      letter-spacing: 1px; text-transform: uppercase; margin-bottom: 6px;
    }
    .schema-box code {
      font-size: 14px; color: #f0e6d0; font-family: 'Courier New', monospace;
      background: rgba(0,0,0,0.3); padding: 5px 12px; border-radius: 6px;
      display: inline-block;
    }
    .schema-box .example { font-size: 12px; color: #777; margin-top: 6px; }
    .schema-box .example code { color: #f59e0b; background: none; padding: 0; font-size: 12px; }

    /* â”€â”€ Stepper â”€â”€ */
    .stepper {
      display: flex; align-items: center; gap: 10px;
      padding: 14px 20px; background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.06); border-radius: 10px;
      margin-bottom: 30px;
    }
    .step-item { display: flex; align-items: center; gap: 10px; }
    .step-circle {
      width: 36px; height: 36px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Courier New', monospace; font-weight: 700; font-size: 15px;
      background: #2a2a2a; color: #666;
      border: 2px solid transparent;
      transition: all 0.3s;
    }
    .step-circle.active { background: #f59e0b; color: #1a1a1a; box-shadow: 0 0 12px rgba(245,158,11,0.35); }
    .step-circle.done   { background: #22c55e; color: #fff; }
    
    /* PDF-Stepper Farben (grÃ¼n) */
    .step-circle.pdf-circle.active { background: #10b981; color: #fff; box-shadow: 0 0 12px rgba(16,185,129,0.35); }
    
    .step-label {
      font-size: 13px; letter-spacing: 1px; text-transform: uppercase;
      color: #555; font-weight: 400; transition: color 0.3s;
    }
    .step-label.active { color: #f0e6d0; font-weight: 600; }
    .step-label.done   { color: #22c55e; font-weight: 600; }
    .step-line {
      flex: 1; height: 2px; background: #2a2a2a; border-radius: 1px; transition: background 0.4s;
    }
    .step-line.done { background: #22c55e; }

    /* â”€â”€ Schritt-BlÃ¶cke â”€â”€ */
    .step-block { margin-bottom: 26px; }
    .step-block-header {
      display: flex; align-items: center; justify-content: space-between; margin-bottom: 14px;
    }
    .step-block-title { font-size: 15px; font-weight: 600; color: #555; }
    .step-block-title.active { color: #f0e6d0; }
    .step-block-title .num { color: #f59e0b; font-family: 'Courier New', monospace; margin-right: 8px; }
    .btn-change {
      background: none; border: 1px solid rgba(255,255,255,0.1); border-radius: 6px;
      color: #999; font-size: 11px; padding: 3px 10px; cursor: pointer;
    }
    .btn-change:hover { border-color: rgba(255,255,255,0.25); color: #ccc; }

    /* â”€â”€ Karten-Grid â”€â”€ */
    .card-grid { display: grid; gap: 10px; }
    .card-grid.cat { grid-template-columns: repeat(2,1fr); }
    .card-grid.ho  { grid-template-columns: repeat(2,1fr); gap: 8px; }

    .card {
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px; padding: 18px 20px;
      cursor: pointer; text-align: left;
      transition: all 0.25s; box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    .card:hover { background: rgba(255,255,255,0.07); border-color: rgba(255,255,255,0.2); }
    .card.selected {
      background: linear-gradient(135deg, #f59e0b, #d97706);
      border: none; box-shadow: 0 4px 24px rgba(245,158,11,0.3);
      transform: translateY(-2px);
    }
    
    /* PDF-Karten (grÃ¼n) */
    .card.pdf-selected {
      background: linear-gradient(135deg, #10b981, #059669);
      border: none; box-shadow: 0 4px 24px rgba(16,185,129,0.3);
      transform: translateY(-2px);
    }
    
    .card .card-title { font-size: 14px; font-weight: 700; color: #f0e6d0; letter-spacing: 0.5px; }
    .card.selected .card-title, .card.pdf-selected .card-title { color: #1a1a1a; }
    .card .card-sub { font-size: 11px; color: #666; margin-top: 4px; font-family: 'Courier New', monospace; }
    .card.selected .card-sub { color: #3b2800; }
    .card.pdf-selected .card-sub { color: #064e3b; }

    .card.ho-card { border-radius: 10px; padding: 12px 16px; }
    .card.ho-card .card-title { font-size: 13px; }

    /* â”€â”€ BestÃ¤tigung (Chips) â”€â”€ */
    .confirmed-chip {
      display: inline-flex; align-items: center; gap: 10px;
      background: rgba(34,197,94,0.07); border: 1px solid rgba(34,197,94,0.2);
      border-radius: 8px; padding: 10px 16px;
    }
    .confirmed-chip .check { color: #22c55e; font-size: 14px; }
    .confirmed-chip .chip-title { font-size: 13px; color: #a8c5a0; font-weight: 600; }
    .confirmed-chip .chip-id { font-size: 11px; color: #666; font-family: 'Courier New', monospace; }

    /* â”€â”€ Anzahl-Stepper â”€â”€ */
    .count-row { display: flex; align-items: center; gap: 14px; }
    .count-btn {
      width: 42px; height: 42px; border-radius: 10px;
      background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.12);
      color: #f0e6d0; font-size: 22px; cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      transition: background 0.2s;
    }
    .count-btn:hover { background: rgba(255,255,255,0.12); }
    .count-display {
      width: 72px; height: 42px; border-radius: 10px;
      background: rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.1);
      display: flex; align-items: center; justify-content: center;
      font-size: 22px; font-weight: 700; color: #f59e0b;
      font-family: 'Courier New', monospace;
    }
    .count-row input[type=range] { flex: 1; accent-color: #f59e0b; cursor: pointer; }
    .count-max { font-size: 11px; color: #666; min-width: 30px; }

    /* â”€â”€ Ergebnis-Box â”€â”€ */
    .result-box {
      background: linear-gradient(145deg, #1e1e14, #14140f);
      border: 1px solid rgba(245,158,11,0.25); border-radius: 14px;
      overflow: hidden; box-shadow: 0 8px 32px rgba(0,0,0,0.4);
      margin-top: 4px;
    }
    .result-header {
      display: flex; align-items: center; justify-content: space-between;
      padding: 14px 20px;
      background: rgba(245,158,11,0.08);
      border-bottom: 1px solid rgba(245,158,11,0.15);
    }
    .result-header .title { font-size: 13px; color: #f59e0b; font-weight: 700; letter-spacing: 0.5px; }
    .result-btns { display: flex; gap: 8px; }
    .btn-copy, .btn-dl {
      border: none; border-radius: 6px; font-size: 12px;
      padding: 6px 14px; cursor: pointer; font-weight: 600; transition: all 0.2s;
    }
    .btn-copy { background: rgba(245,158,11,0.15); color: #f59e0b; }
    .btn-copy:hover { background: rgba(245,158,11,0.25); }
    .btn-copy.copied { background: #22c55e; color: #fff; }
    .btn-dl { background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1); color: #ccc; }
    .btn-dl:hover { background: rgba(255,255,255,0.1); }

    .result-list { padding: 16px; max-height: 320px; overflow-y: auto; }
    .result-item {
      display: flex; align-items: center; justify-content: space-between;
      padding: 8px 12px; border-radius: 7px; cursor: pointer;
      border: 1px solid transparent; transition: background 0.2s;
    }
    .result-item:nth-child(odd) { background: rgba(255,255,255,0.025); }
    .result-item:hover { background: rgba(255,255,255,0.06); }
    .result-item.item-copied { background: rgba(34,197,94,0.1); border-color: rgba(34,197,94,0.3); }
    .result-item .item-left { display: flex; align-items: center; gap: 10px; }
    .result-item .item-num { font-family: 'Courier New', monospace; font-size: 11px; color: #666; min-width: 22px; text-align: right; }
    .result-item .item-name { font-family: 'Courier New', monospace; font-size: 13.5px; color: #d4c5a9; letter-spacing: 0.3px; }
    .result-item.item-copied .item-name { color: #22c55e; }
    .result-item .item-hint { font-size: 10px; color: #444; }
    .result-item.item-copied .item-hint { color: #22c55e; }

    /* â”€â”€ Reset â”€â”€ */
    .btn-reset {
      display: block; margin: 26px auto 0;
      background: none; border: 1px solid rgba(255,255,255,0.12); border-radius: 8px;
      color: #666; font-size: 13px; padding: 8px 22px; cursor: pointer; transition: all 0.2s;
    }
    .btn-reset:hover { border-color: rgba(255,255,255,0.25); color: #aaa; }

    /* â”€â”€ Trennlinie â”€â”€ */
    .section-divider {
      display: flex; align-items: center; gap: 16px;
      margin: 48px 0 36px;
    }
    .section-divider .line { flex: 1; height: 1px; background: rgba(255,255,255,0.08); }
    .section-divider .badge {
      font-family: 'Courier New', monospace; font-size: 10px; letter-spacing: 2px;
      color: #8b5cf6; text-transform: uppercase; padding: 5px 12px;
      border: 1px solid rgba(139,92,246,0.3); border-radius: 14px;
      background: rgba(139,92,246,0.06); white-space: nowrap;
    }

    /* â”€â”€ Neues-Handout Panel â”€â”€ */
    .new-ho-panel {
      background: rgba(139,92,246,0.04);
      border: 1px solid rgba(139,92,246,0.18);
      border-radius: 14px; overflow: hidden;
    }
    .new-ho-header {
      padding: 16px 20px;
      background: rgba(139,92,246,0.08);
      border-bottom: 1px solid rgba(139,92,246,0.15);
    }
    .new-ho-header .nh-title { font-size: 15px; font-weight: 700; color: #c4b5fd; }
    .new-ho-header .nh-sub { font-size: 12px; color: #666; margin-top: 3px; }

    .new-ho-body { padding: 22px 20px; }

    /* Inputs */
    .nh-field { margin-bottom: 18px; }
    .nh-field label {
      display: block; font-size: 12px; color: #999; font-weight: 600;
      margin-bottom: 7px; letter-spacing: 0.5px;
    }
    .nh-field label span { color: #8b5cf6; }
    .nh-field input {
      width: 100%; padding: 10px 14px; border-radius: 8px;
      background: rgba(0,0,0,0.35); border: 1px solid rgba(255,255,255,0.1);
      color: #f0e6d0; font-size: 14px; font-family: 'Segoe UI', sans-serif;
      outline: none; transition: border-color 0.2s;
    }
    .nh-field input:focus { border-color: rgba(139,92,246,0.5); }
    .nh-field input.mono { font-family: 'Courier New', monospace; font-size: 13px; color: #c4b5fd; }
    .nh-field .id-hint { font-size: 11px; color: #555; margin-top: 5px; font-family: 'Courier New', monospace; }

    /* Kategorie-Auswahl im Neues-Handout */
    .nh-cat-grid { display: grid; grid-template-columns: repeat(2,1fr); gap: 8px; }
    .nh-cat-btn {
      background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.1);
      border-radius: 8px; padding: 10px 14px; cursor: pointer; text-align: left;
      transition: all 0.2s;
    }
    .nh-cat-btn:hover { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.2); }
    .nh-cat-btn.sel {
      background: linear-gradient(135deg, #8b5cf6, #7c3aed);
      border-color: transparent; box-shadow: 0 3px 16px rgba(139,92,246,0.3);
    }
    .nh-cat-btn .nh-cat-title { font-size: 13px; font-weight: 600; color: #e8ddd0; }
    .nh-cat-btn.sel .nh-cat-title { color: #fff; }
    .nh-cat-btn .nh-cat-id { font-size: 10px; color: #666; font-family: 'Courier New', monospace; margin-top: 2px; }
    .nh-cat-btn.sel .nh-cat-id { color: rgba(255,255,255,0.7); }

    /* Erzeugen-Button */
    .btn-generate {
      width: 100%; padding: 12px; margin-top: 8px; border: none; border-radius: 9px;
      background: linear-gradient(135deg, #8b5cf6, #7c3aed);
      color: #fff; font-size: 14px; font-weight: 700; cursor: pointer;
      transition: all 0.2s; letter-spacing: 0.3px;
    }
    .btn-generate:hover { box-shadow: 0 4px 20px rgba(139,92,246,0.4); transform: translateY(-1px); }
    .btn-generate:disabled { background: #3a3a3a; color: #666; cursor: not-allowed; transform: none; box-shadow: none; }

    /* â”€â”€ Generiertes Code-Ergebnis â”€â”€ */
    .nh-result { margin-top: 24px; }
    .nh-result-box {
      background: rgba(139,92,246,0.05); border: 1px solid rgba(139,92,246,0.2);
      border-radius: 12px; overflow: hidden;
    }
    .nh-result-header {
      display: flex; align-items: center; justify-content: space-between;
      padding: 11px 16px; background: rgba(139,92,246,0.1);
      border-bottom: 1px solid rgba(139,92,246,0.15);
    }
    .nh-result-header .nrh-label { font-size: 12px; color: #c4b5fd; font-weight: 700; }
    .btn-copy-code {
      background: rgba(139,92,246,0.2); border: none; border-radius: 5px;
      color: #c4b5fd; font-size: 11px; padding: 4px 11px; cursor: pointer; font-weight: 600;
      transition: all 0.2s;
    }
    .btn-copy-code:hover { background: rgba(139,92,246,0.35); }
    .btn-copy-code.copied { background: #22c55e; color: #fff; }

    /* Code-Block */
    .code-block {
      padding: 14px 16px; font-family: 'Courier New', monospace; font-size: 12.5px;
      line-height: 1.7; color: #aaa; white-space: pre; overflow-x: auto;
    }
    .code-block .c-dim { color: #555; }
    .code-block .c-key { color: #7dd3fc; }
    .code-block .c-str { color: #86efac; }
    .code-block .c-new { color: #fff; background: rgba(139,92,246,0.2); padding: 2px 8px; border-radius: 4px; border-left: 3px solid #8b5cf6; }
    .code-block .c-arrow { color: #8b5cf6; font-weight: 700; }

    /* â”€â”€ Anleitung-Schritte â”€â”€ */
    .nh-instructions { margin-top: 18px; }
    .nh-instr-title { font-size: 12px; color: #8b5cf6; font-weight: 700; letter-spacing: 0.8px; text-transform: uppercase; margin-bottom: 12px; }
    .instr-step {
      display: flex; gap: 12px; margin-bottom: 14px; align-items: flex-start;
    }
    .instr-num {
      min-width: 26px; height: 26px; border-radius: 50%;
      background: rgba(139,92,246,0.15); border: 1px solid rgba(139,92,246,0.3);
      display: flex; align-items: center; justify-content: center;
      font-size: 12px; font-weight: 700; color: #8b5cf6;
      font-family: 'Courier New', monospace; flex-shrink: 0;
    }
    .instr-text { font-size: 13px; color: #bbb; line-height: 1.5; padding-top: 2px; }
    .instr-text strong { color: #e8ddd0; font-weight: 600; }
    .instr-text code {
      font-family: 'Courier New', monospace; font-size: 11.5px;
      background: rgba(0,0,0,0.35); color: #c4b5fd; padding: 2px 7px; border-radius: 4px;
    }

    /* â”€â”€ Validation-Fehler â”€â”€ */
    .nh-error {
      font-size: 12px; color: #f87171; background: rgba(248,113,113,0.08);
      border: 1px solid rgba(248,113,113,0.25); border-radius: 6px;
      padding: 8px 12px; margin-top: 10px; display: none;
    }
    .nh-error.visible { display: block; }

    /* â”€â”€ Hidden Helper â”€â”€ */
    .hidden { display: none !important; }

    @media (max-width: 520px) {
      .card-grid.cat, .card-grid.ho { grid-template-columns: 1fr; }
      .stepper { gap: 6px; padding: 12px 14px; }
      .step-label { font-size: 11px; }
      .nh-cat-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

<div class="container">

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- BILDBENENNUNGS-GENERATOR (ORANGE)                    -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

  <!-- Header -->
  <div class="header">
    <div class="header-badge">Handout-Verwaltung</div>
    <h1>Bildbenennungs-<span>Generator</span></h1>
    <p>Erstelle korrekt benannte Dateinamen fÃ¼r deine Handout-Bilder</p>
  </div>

  <!-- Schema -->
  <div class="schema-box">
    <div class="label">Benennungsschema</div>
    <code>kategorie-id_handout-id_seitennummer.jpg</code>
    <div class="example">Beispiel: <code>digitaler-alltag_doctolib_1.jpg</code></div>
  </div>

  <!-- Stepper -->
  <div class="stepper">
    <div class="step-item">
      <div class="step-circle active" id="circle-1">1</div>
      <span class="step-label active" id="label-1">Kategorie</span>
    </div>
    <div class="step-line" id="line-1"></div>
    <div class="step-item">
      <div class="step-circle" id="circle-2">2</div>
      <span class="step-label" id="label-2">Handout</span>
    </div>
    <div class="step-line" id="line-2"></div>
    <div class="step-item">
      <div class="step-circle" id="circle-3">3</div>
      <span class="step-label" id="label-3">Anzahl</span>
    </div>
  </div>

  <!-- STEP 1: Kategorie -->
  <div class="step-block" id="block-1">
    <div class="step-block-header">
      <div class="step-block-title active" id="title-1"><span class="num">01</span>WÃ¤hle eine Kategorie</div>
    </div>
    <div id="cat-cards" class="card-grid cat"></div>
    <div id="cat-confirmed" class="confirmed-chip hidden"></div>
  </div>

  <!-- STEP 2: Handout -->
  <div class="step-block hidden" id="block-2">
    <div class="step-block-header">
      <div class="step-block-title" id="title-2"><span class="num">02</span>WÃ¤hle ein Handout</div>
      <button class="btn-change" id="btn-change-ho" onclick="changeStep(2)">Ã¤ndern</button>
    </div>
    <div id="ho-cards" class="card-grid ho"></div>
    <div id="ho-confirmed" class="confirmed-chip hidden"></div>
  </div>

  <!-- STEP 3: Anzahl -->
  <div class="step-block hidden" id="block-3">
    <div class="step-block-header">
      <div class="step-block-title" id="title-3"><span class="num">03</span>Wie viele Bilder gehÃ¶ren zum Handout?</div>
    </div>
    <div class="count-row">
      <button class="count-btn" onclick="changeCount(-1)">âˆ’</button>
      <div class="count-display" id="count-display">1</div>
      <button class="count-btn" onclick="changeCount(1)">+</button>
      <input type="range" min="1" max="50" value="1" id="count-slider" oninput="setCount(this.value)"/>
      <span class="count-max">/50</span>
    </div>
  </div>

  <!-- Ergebnis -->
  <div class="result-box hidden" id="result-box">
    <div class="result-header">
      <span class="title" id="result-title">ğŸ“‚ Generierte Dateinamen</span>
      <div class="result-btns">
        <button class="btn-copy" id="btn-copy-all" onclick="copyAll()">ğŸ“‹ Alles kopieren</button>
        <button class="btn-dl" onclick="downloadTxt()">â¬‡ Download .txt</button>
      </div>
    </div>
    <div class="result-list" id="result-list"></div>
  </div>

  <!-- Reset -->
  <button class="btn-reset hidden" id="btn-reset" onclick="resetAll()">â†º ZurÃ¼cksetzen</button>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- HANDOUT-PDF GENERATOR (GRÃœN)                         -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="section-divider" style="margin-top: 80px;">
    <div class="line"></div>
    <div class="badge" style="color:#10b981; border-color:rgba(16,185,129,0.3); background:rgba(16,185,129,0.06);">TOOL 2 â€¢ ğŸ“„ PDF Generator</div>
    <div class="line"></div>
  </div>

  <div style="margin-bottom: 60px;">
    <!-- Header -->
    <div class="header">
      <div class="header-badge" style="color:#10b981; border-color:rgba(16,185,129,0.3);">Handout-Verwaltung</div>
      <h1>Handout-PDF-<span style="color:#10b981;">Generator</span></h1>
      <p>Erstelle korrekt benannte PDF-Dateinamen fÃ¼r deine Handouts</p>
    </div>

    <!-- Schema -->
    <div class="schema-box" style="background:rgba(16,185,129,0.06); border-color:rgba(16,185,129,0.18);">
      <div class="label" style="color:#10b981;">Benennungsschema</div>
      <code>kategorie-id_handout-id.pdf</code>
      <div class="example">Beispiel: <code style="color:#10b981;">digitaler-alltag_doctolib.pdf</code></div>
      <div class="example" style="margin-top:8px; color:#888;">ğŸ“ Zielordner: <code style="color:#10b981; background:rgba(16,185,129,0.1);">handout/</code></div>
    </div>

    <!-- Stepper -->
    <div class="stepper">
      <div class="step-item">
        <div class="step-circle active pdf-circle" id="pdf-circle-1">1</div>
        <span class="step-label active" id="pdf-label-1">Kategorie</span>
      </div>
      <div class="step-line" id="pdf-line-1"></div>
      <div class="step-item">
        <div class="step-circle pdf-circle" id="pdf-circle-2">2</div>
        <span class="step-label" id="pdf-label-2">Handout</span>
      </div>
    </div>

    <!-- STEP 1: Kategorie -->
    <div class="step-block" id="pdf-block-1">
      <div class="step-block-header">
        <div class="step-block-title active" id="pdf-title-1"><span class="num" style="color:#10b981;">01</span>WÃ¤hle eine Kategorie</div>
      </div>
      <div id="pdf-cat-cards" class="card-grid cat"></div>
      <div id="pdf-cat-confirmed" class="confirmed-chip hidden" style="background:rgba(16,185,129,0.07); border-color:rgba(16,185,129,0.2);"></div>
    </div>

    <!-- STEP 2: Handout -->
    <div class="step-block hidden" id="pdf-block-2">
      <div class="step-block-header">
        <div class="step-block-title" id="pdf-title-2"><span class="num" style="color:#10b981;">02</span>WÃ¤hle ein Handout</div>
        <button class="btn-change" id="pdf-btn-change-cat" onclick="pdfChangeStep(1)">Ã¤ndern</button>
      </div>
      <div id="pdf-ho-cards" class="card-grid ho"></div>
      <div id="pdf-ho-confirmed" class="confirmed-chip hidden" style="background:rgba(16,185,129,0.07); border-color:rgba(16,185,129,0.2);"></div>
    </div>

    <!-- Ergebnis -->
    <div class="result-box hidden" id="pdf-result-box" style="border-color:rgba(16,185,129,0.25);">
      <div class="result-header" style="background:rgba(16,185,129,0.08); border-bottom-color:rgba(16,185,129,0.15);">
        <span class="title" id="pdf-result-title" style="color:#10b981;">ğŸ“„ Generierter Dateiname</span>
        <div class="result-btns">
          <button class="btn-copy" id="pdf-btn-copy" onclick="pdfCopy()" style="background:rgba(16,185,129,0.15); color:#10b981;">ğŸ“‹ Kopieren</button>
          <button class="btn-dl" onclick="pdfDownloadTxt()">â¬‡ Download .txt</button>
        </div>
      </div>
      <div class="result-list" id="pdf-result-list"></div>
    </div>

    <!-- Reset -->
    <button class="btn-reset hidden" id="pdf-btn-reset" onclick="pdfResetAll()">â†º ZurÃ¼cksetzen</button>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- HANDOUT / KATEGORIE HINZUFÃœGEN                      -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="section-divider">
    <div class="line"></div>
    <div class="badge">âš™ Verwaltung</div>
    <div class="line"></div>
  </div>

  <!-- Ãœberschrift -->
  <div style="text-align: center; margin-bottom: 24px;">
    <h2 style="font-size: 22px; font-weight: 700; color: #f0e6d0; letter-spacing: -0.3px;">
      HANDOUT / KATEGORIE <span style="color: #8b5cf6;">HINZUFÃœGEN</span>
    </h2>
  </div>

  <!-- Bild -->
  <div style="text-align: center; margin-bottom: 36px;">
    <img src="anleitung.png" alt="Anleitung Handout hinzufÃ¼gen" style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 8px 32px rgba(0,0,0,0.4); border: 1px solid rgba(255,255,255,0.1);" />
  </div>

  <div class="new-ho-panel">
    <div class="new-ho-header">
      <div class="nh-title">ğŸ“ Neues Handout hinzufÃ¼gen</div>
      <div class="nh-sub">Generiert den Code-Snippet zum EinfÃ¼gen in deine index.html</div>
    </div>
    <div class="new-ho-body">

      <!-- Titel -->
      <div class="nh-field">
        <label><span>*</span> Handout-Name (Anzeigename)</label>
        <input type="text" id="nh-title-input" placeholder="z.B. Google Maps" oninput="onNhTitleInput()" />
      </div>

      <!-- ID (auto-generiert, editierbar) -->
      <div class="nh-field">
        <label><span>*</span> Handout-ID <span style="color:#666;font-weight:400;">(wird automatisch erzeugt)</span></label>
        <input type="text" id="nh-id-input" class="mono" placeholder="z.B. google-maps" oninput="onNhIdInput()" />
        <div class="id-hint" id="nh-id-hint">â†’ wird aus dem Namen automatisch abgeleitet</div>
      </div>

      <!-- Kategorie -->
      <div class="nh-field">
        <label><span>*</span> Kategorie</label>
        <div class="nh-cat-grid" id="nh-cat-grid"></div>
      </div>

      <!-- Fehler -->
      <div class="nh-error" id="nh-error"></div>

      <!-- Button -->
      <button class="btn-generate" id="btn-generate" disabled onclick="generateCode()">Code erzeugen</button>

      <!-- Ergebnis -->
      <div class="nh-result hidden" id="nh-result">

        <!-- Code-Zeile zum Kopieren -->
        <div class="nh-result-box">
          <div class="nh-result-header">
            <span class="nrh-label">ğŸ“‹ Code-Zeile</span>
            <button class="btn-copy-code" id="btn-copy-code" onclick="copyCode()">Kopieren</button>
          </div>
          <div class="code-block" id="nh-code-line"></div>
        </div>

        <!-- Kontext: wo einfÃ¼gen -->
        <div class="nh-result-box" style="margin-top:12px;">
          <div class="nh-result-header">
            <span class="nrh-label">ğŸ“ Wo einfÃ¼gen â€“ Kontext</span>
          </div>
          <div class="code-block" id="nh-code-context"></div>
        </div>

        <!-- Schritt-fÃ¼r-Schritt-Anleitung -->
        <div class="nh-instructions" id="nh-instructions"></div>
      </div>

    </div>
  </div>

</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  DATEN (geteilt zwischen beiden Generatoren)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const categoriesConfig = {
  'unterhaltung': { title: 'UNTERHALTUNG', handouts: [
    { id: 'ard-audiothek', title:'ARD Audiothek' },
    { id: 'spotify', title:'Spotify' }
  ]},
  'digitaler-alltag': { title: 'DIGITALER ALLTAG', handouts: [
    {id:'notfallpass-android', title:'Notfallpass Android'},
    {id:'notfallpass-iphone', title:'Notfallpass iPhone'},
    {id:'online-banking', title:'Online Banking'},
    {id:'db-app', title:'DB App'},
    {id:'lieferdienste', title:'Lieferdienste'},
    {id:'online-shops', title:'Online Shops'},
    {id:'flaschenpost', title:'Flaschenpost'},
    {id:'doctolib', title:'Doctolib'},
    {id:'payback-app', title:'Payback App'},
    {id:'mytherapy', title:'MyTherapy'},
    {id:'e-rezept-gesundde', title:'E-Rezept - Gesund.de'}
  ]},
  'sicherheit': { title: 'SICHERHEIT', handouts: [
    {id:'adblocker-antivirus', title:'Adblocker und Antivirus'},
    {id:'chrome-werbung-blockieren', title:'Chrome Werbung blockieren'},
    {id:'samsung-browser-werbung-blockieren', title:'Samsung Browser Werbung blockieren'},
    {id:'xiaomi-werbung', title:'Xiaomi Werbung'},
    {id:'safari-einstellungen', title:'Safari Einstellungen'},
    {id:'online-betrug', title:'Online-Betrug'},
    {id:'passwortmanager', title:'Passwortmanager Handout'}
  ]},
  'handy-grundlagen': { title:'HANDY GRUNDLAGEN', handouts: [
    {id:'e-mails', title:'E-Mails lesen und schreiben'},
    {id:'fotos-whatsapp', title:'Fotos versenden WhatsApp'},
    {id:'kalendereintrag', title:'Kalendereintrag'},
    {id:'loeschungen-android', title:'LÃ¶schungen auf dem Android'},
    {id:'updates-handy', title:'Updates auf dem Handy installieren'},
    {id:'app-installieren-android', title:'App Installieren Android'},
    {id:'qr-code-android', title:'QR-Code Android'},
    {id:'qr-code-ios', title:'QR-Code iOS'},
    {id:'loeschungen-iphone', title:'LÃ¶schungen auf einem iPhone durchfÃ¼hren'},
    {id:'datenuebertragung-android', title:'DatenÃ¼bertragung Android'},
    {id:'datenuebertragung-android-kurz', title:'DatenÃ¼bertragung Android Einfach'},
    {id:'datenuebertragung-iphone', title:'DatenÃ¼bertragung iPhone'},
    {id:'datenuebertragung-vergleich', title:'DatenÃ¼bertragung Android vs iPhone'}
  ]}
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  BILDBENENNUNGS-GENERATOR (ORANGE) - State
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let currentStep      = 1;
let selectedCategory = null;
let selectedHandout  = null;
let imageCount       = 1;

// â”€â”€ Init: Kategorie-Karten rendern â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function initCatCards() {
  const grid = document.getElementById('cat-cards');
  Object.entries(categoriesConfig).forEach(([id, cfg]) => {
    const card = document.createElement('div');
    card.className = 'card';
    card.dataset.id = id;
    card.innerHTML = `
      <div class="card-title">${cfg.title}</div>
      <div class="card-sub">${cfg.handouts.length} Handouts</div>`;
    card.addEventListener('click', () => selectCategory(id));
    grid.appendChild(card);
  });
})();

// â”€â”€ Kategorie wÃ¤hlen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectCategory(id) {
  selectedCategory = id;
  selectedHandout  = null;
  imageCount       = 1;

  // Karte highlighten
  document.querySelectorAll('#cat-cards .card').forEach(c => c.classList.toggle('selected', c.dataset.id === id));

  // BestÃ¤tigungschip
  const cfg = categoriesConfig[id];
  document.getElementById('cat-confirmed').innerHTML =
    `<span class="check">âœ“</span><span class="chip-title">${cfg.title}</span><span class="chip-id">${id}</span>`;

  // Handout-Karten befÃ¼llen
  const hoGrid = document.getElementById('ho-cards');
  hoGrid.innerHTML = '';
  cfg.handouts.forEach(h => {
    const card = document.createElement('div');
    card.className = 'card ho-card';
    card.dataset.id = h.id;
    card.innerHTML = `<div class="card-title">${h.title}</div><div class="card-sub">${h.id}</div>`;
    card.addEventListener('click', () => selectHandout(h.id));
    hoGrid.appendChild(card);
  });

  goToStep(2);
}

// â”€â”€ Handout wÃ¤hlen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectHandout(id) {
  selectedHandout = id;
  document.querySelectorAll('#ho-cards .card').forEach(c => c.classList.toggle('selected', c.dataset.id === id));

  const ho = categoriesConfig[selectedCategory].handouts.find(h => h.id === id);
  document.getElementById('ho-confirmed').innerHTML =
    `<span class="check">âœ“</span><span class="chip-title">${ho.title}</span><span class="chip-id">${ho.id}</span>`;

  goToStep(3);
}

// â”€â”€ Anzahl Ã¤ndern â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function changeCount(delta) {
  imageCount = Math.min(50, Math.max(1, imageCount + delta));
  syncCount();
  renderResult();
}
function setCount(val) {
  imageCount = Number(val);
  syncCount();
  renderResult();
}
function syncCount() {
  document.getElementById('count-display').textContent = imageCount;
  document.getElementById('count-slider').value = imageCount;
}

// â”€â”€ Ergebnis rendern â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderResult() {
  if (!selectedCategory || !selectedHandout) return;

  const names = getFilenames();
  document.getElementById('result-title').textContent = `ğŸ“‚ Generierte Dateinamen (${names.length})`;

  const list = document.getElementById('result-list');
  list.innerHTML = '';
  names.forEach((name, i) => {
    const item = document.createElement('div');
    item.className = 'result-item';
    item.id = 'item-' + i;
    item.innerHTML = `
      <div class="item-left">
        <span class="item-num">${i+1}.</span>
        <code class="item-name">${name}</code>
      </div>
      <span class="item-hint">klicken</span>`;
    item.addEventListener('click', () => copySingle(name, i));
    list.appendChild(item);
  });

  show('result-box');
  show('btn-reset');
}

// â”€â”€ Schritt-Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function goToStep(n) {
  currentStep = n;

  // BlÃ¶cke ein/ausblenden & Titel-Farbe
  [1,2,3].forEach(s => {
    const block = document.getElementById('block-'+s);
    const title = document.getElementById('title-'+s);
    if (s < n) {
      show(block);
      title.classList.remove('active');
      // BestÃ¤tigung zeigen, Karten verstecken
      const cards = block.querySelector('.card-grid');
      const conf  = block.querySelector('.confirmed-chip');
      if (cards) cards.classList.add('hidden');
      if (conf)  conf.classList.remove('hidden');
    } else if (s === n) {
      show(block);
      title.classList.add('active');
      const cards = block.querySelector('.card-grid');
      const conf  = block.querySelector('.confirmed-chip');
      if (cards) cards.classList.remove('hidden');
      if (conf)  conf.classList.add('hidden');
    } else {
      hide(block);
      title.classList.remove('active');
    }
  });

  // "Ã¤ndern"-Buttons
  document.getElementById('btn-change-ho').classList.toggle('hidden', n !== 3);

  // Stepper-Kreise & Linien
  updateStepper();

  // Ergebnis
  if (n === 3) {
    syncCount();
    renderResult();
  } else {
    hide('result-box');
    hide('btn-reset');
  }
}

function changeStep(toStep) {
  if (toStep === 2) {
    selectedHandout = null;
    goToStep(2);
  }
}

function updateStepper() {
  [1,2,3].forEach(s => {
    const circle = document.getElementById('circle-'+s);
    const label  = document.getElementById('label-'+s);
    circle.classList.remove('active','done');
    label.classList.remove('active','done');
    if (s < currentStep)      { circle.classList.add('done'); circle.textContent = 'âœ“'; label.classList.add('done'); }
    else if (s === currentStep) { circle.classList.add('active'); circle.textContent = s; label.classList.add('active'); }
    else                       { circle.textContent = s; }
  });
  // Linien
  document.getElementById('line-1').classList.toggle('done', currentStep > 1);
  document.getElementById('line-2').classList.toggle('done', currentStep > 2);
}

// â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getFilenames() {
  return Array.from({length: imageCount}, (_,i) => `${selectedCategory}_${selectedHandout}_${i+1}.jpg`);
}

function copySingle(name, idx) {
  navigator.clipboard.writeText(name).then(() => {
    const item = document.getElementById('item-'+idx);
    item.classList.add('item-copied');
    item.querySelector('.item-hint').textContent = 'âœ“ kopiert';
    setTimeout(() => {
      item.classList.remove('item-copied');
      item.querySelector('.item-hint').textContent = 'klicken';
    }, 1200);
  });
}

function copyAll() {
  navigator.clipboard.writeText(getFilenames().join('\n')).then(() => {
    const btn = document.getElementById('btn-copy-all');
    btn.classList.add('copied');
    btn.textContent = 'âœ“ Kopiert!';
    setTimeout(() => { btn.classList.remove('copied'); btn.textContent = 'ğŸ“‹ Alles kopieren'; }, 2000);
  });
}

function downloadTxt() {
  const blob = new Blob([getFilenames().join('\n')], {type:'text/plain'});
  const url  = URL.createObjectURL(blob);
  const a    = document.createElement('a');
  a.href     = url;
  a.download = `${selectedCategory}_${selectedHandout}_dateinamen.txt`;
  a.click();
  URL.revokeObjectURL(url);
}

function resetAll() {
  selectedCategory = null;
  selectedHandout  = null;
  imageCount       = 1;
  // Kategorie-Karten zurÃ¼ck
  document.querySelectorAll('#cat-cards .card').forEach(c => c.classList.remove('selected'));
  document.getElementById('cat-confirmed').classList.add('hidden');
  document.getElementById('cat-cards').classList.remove('hidden');
  // BlÃ¶cke 2 & 3 verstecken
  hide('block-2');
  hide('block-3');
  hide('result-box');
  hide('btn-reset');
  // Stepper
  currentStep = 1;
  updateStepper();
  document.getElementById('title-1').classList.add('active');
}


// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  HANDOUT-PDF-GENERATOR (GRÃœN) - State & Logik
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let pdfCurrentStep      = 1;
let pdfSelectedCategory = null;
let pdfSelectedHandout  = null;

// â”€â”€ Init: PDF Kategorie-Karten rendern â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function initPdfCatCards() {
  const grid = document.getElementById('pdf-cat-cards');
  Object.entries(categoriesConfig).forEach(([id, cfg]) => {
    const card = document.createElement('div');
    card.className = 'card';
    card.dataset.id = id;
    card.innerHTML = `
      <div class="card-title">${cfg.title}</div>
      <div class="card-sub">${cfg.handouts.length} Handouts</div>`;
    card.addEventListener('click', () => pdfSelectCategory(id));
    grid.appendChild(card);
  });
})();

// â”€â”€ PDF: Kategorie wÃ¤hlen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function pdfSelectCategory(id) {
  pdfSelectedCategory = id;
  pdfSelectedHandout  = null;

  // Karte highlighten
  document.querySelectorAll('#pdf-cat-cards .card').forEach(c => c.classList.toggle('pdf-selected', c.dataset.id === id));

  // BestÃ¤tigungschip
  const cfg = categoriesConfig[id];
  document.getElementById('pdf-cat-confirmed').innerHTML =
    `<span class="check" style="color:#10b981;">âœ“</span><span class="chip-title" style="color:#86efac;">${cfg.title}</span><span class="chip-id">${id}</span>`;

  // Handout-Karten befÃ¼llen
  const hoGrid = document.getElementById('pdf-ho-cards');
  hoGrid.innerHTML = '';
  cfg.handouts.forEach(h => {
    const card = document.createElement('div');
    card.className = 'card ho-card';
    card.dataset.id = h.id;
    card.innerHTML = `<div class="card-title">${h.title}</div><div class="card-sub">${h.id}</div>`;
    card.addEventListener('click', () => pdfSelectHandout(h.id));
    hoGrid.appendChild(card);
  });

  pdfGoToStep(2);
}

// â”€â”€ PDF: Handout wÃ¤hlen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function pdfSelectHandout(id) {
  pdfSelectedHandout = id;
  document.querySelectorAll('#pdf-ho-cards .card').forEach(c => c.classList.toggle('pdf-selected', c.dataset.id === id));

  const ho = categoriesConfig[pdfSelectedCategory].handouts.find(h => h.id === id);
  document.getElementById('pdf-ho-confirmed').innerHTML =
    `<span class="check" style="color:#10b981;">âœ“</span><span class="chip-title" style="color:#86efac;">${ho.title}</span><span class="chip-id">${ho.id}</span>`;

  pdfRenderResult();
}

// â”€â”€ PDF: Ergebnis rendern â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function pdfRenderResult() {
  if (!pdfSelectedCategory || !pdfSelectedHandout) return;

  const filename = pdfGetFilename();
  document.getElementById('pdf-result-title').textContent = `ğŸ“„ Generierter Dateiname`;

  const list = document.getElementById('pdf-result-list');
  list.innerHTML = '';
  
  const item = document.createElement('div');
  item.className = 'result-item';
  item.id = 'pdf-item-0';
  item.innerHTML = `
    <div class="item-left">
      <span class="item-num">ğŸ“</span>
      <code class="item-name">${filename}</code>
    </div>
    <span class="item-hint">klicken zum kopieren</span>`;
  item.addEventListener('click', () => pdfCopySingle(filename));
  list.appendChild(item);

  show('pdf-result-box');
  show('pdf-btn-reset');
}

// â”€â”€ PDF: Schritt-Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function pdfGoToStep(n) {
  pdfCurrentStep = n;

  // BlÃ¶cke ein/ausblenden & Titel-Farbe
  [1,2].forEach(s => {
    const block = document.getElementById('pdf-block-'+s);
    const title = document.getElementById('pdf-title-'+s);
    if (s < n) {
      show(block);
      title.classList.remove('active');
      // BestÃ¤tigung zeigen, Karten verstecken
      const cards = block.querySelector('.card-grid');
      const conf  = block.querySelector('.confirmed-chip');
      if (cards) cards.classList.add('hidden');
      if (conf)  conf.classList.remove('hidden');
    } else if (s === n) {
      show(block);
      title.classList.add('active');
      const cards = block.querySelector('.card-grid');
      const conf  = block.querySelector('.confirmed-chip');
      if (cards) cards.classList.remove('hidden');
      if (conf)  conf.classList.add('hidden');
    } else {
      hide(block);
      title.classList.remove('active');
    }
  });

  // "Ã¤ndern"-Button
  document.getElementById('pdf-btn-change-cat').classList.toggle('hidden', n !== 2);

  // Stepper-Kreise & Linien
  pdfUpdateStepper();

  // Ergebnis
  if (n === 2 && pdfSelectedHandout) {
    pdfRenderResult();
  } else {
    hide('pdf-result-box');
    hide('pdf-btn-reset');
  }
}

function pdfChangeStep(toStep) {
  if (toStep === 1) {
    pdfSelectedHandout = null;
    pdfGoToStep(1);
  }
}

function pdfUpdateStepper() {
  [1,2].forEach(s => {
    const circle = document.getElementById('pdf-circle-'+s);
    const label  = document.getElementById('pdf-label-'+s);
    circle.classList.remove('active','done');
    label.classList.remove('active','done');
    if (s < pdfCurrentStep)      { circle.classList.add('done'); circle.textContent = 'âœ“'; label.classList.add('done'); }
    else if (s === pdfCurrentStep) { circle.classList.add('active'); circle.textContent = s; label.classList.add('active'); }
    else                       { circle.textContent = s; }
  });
  // Linie
  document.getElementById('pdf-line-1').classList.toggle('done', pdfCurrentStep > 1);
}

// â”€â”€ PDF: Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function pdfGetFilename() {
  return `${pdfSelectedCategory}_${pdfSelectedHandout}.pdf`;
}

function pdfCopySingle(name) {
  navigator.clipboard.writeText(name).then(() => {
    const item = document.getElementById('pdf-item-0');
    item.classList.add('item-copied');
    item.querySelector('.item-hint').textContent = 'âœ“ kopiert';
    setTimeout(() => {
      item.classList.remove('item-copied');
      item.querySelector('.item-hint').textContent = 'klicken zum kopieren';
    }, 1200);
  });
}

function pdfCopy() {
  navigator.clipboard.writeText(pdfGetFilename()).then(() => {
    const btn = document.getElementById('pdf-btn-copy');
    btn.classList.add('copied');
    btn.textContent = 'âœ“ Kopiert!';
    setTimeout(() => { btn.classList.remove('copied'); btn.textContent = 'ğŸ“‹ Kopieren'; }, 2000);
  });
}

function pdfDownloadTxt() {
  const blob = new Blob([pdfGetFilename()], {type:'text/plain'});
  const url  = URL.createObjectURL(blob);
  const a    = document.createElement('a');
  a.href     = url;
  a.download = `${pdfSelectedCategory}_${pdfSelectedHandout}_dateiname.txt`;
  a.click();
  URL.revokeObjectURL(url);
}

function pdfResetAll() {
  pdfSelectedCategory = null;
  pdfSelectedHandout  = null;
  // Kategorie-Karten zurÃ¼ck
  document.querySelectorAll('#pdf-cat-cards .card').forEach(c => c.classList.remove('pdf-selected'));
  document.getElementById('pdf-cat-confirmed').classList.add('hidden');
  document.getElementById('pdf-cat-cards').classList.remove('hidden');
  // Block 2 verstecken
  hide('pdf-block-2');
  hide('pdf-result-box');
  hide('pdf-btn-reset');
  // Stepper
  pdfCurrentStep = 1;
  pdfUpdateStepper();
  document.getElementById('pdf-title-1').classList.add('active');
}


// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  HELPER FUNCTIONS (geteilt)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function show(el) { (typeof el === 'string' ? document.getElementById(el) : el).classList.remove('hidden'); }
function hide(el) { (typeof el === 'string' ? document.getElementById(el) : el).classList.add('hidden'); }


// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  NEUES HANDOUT â€“ Logik
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

let nhSelectedCat = null;   // gewÃ¤hlte Kategorie fÃ¼r neues Handout
let nhIdManual    = false;  // wurde die ID manuell geÃ¤ndert?

// â”€â”€ Kategorie-Buttons im NH-Formular rendern â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(function initNhCatGrid() {
  const grid = document.getElementById('nh-cat-grid');
  Object.entries(categoriesConfig).forEach(([id, cfg]) => {
    const btn = document.createElement('div');
    btn.className = 'nh-cat-btn';
    btn.dataset.id = id;
    btn.innerHTML = `<div class="nh-cat-title">${cfg.title}</div><div class="nh-cat-id">${id}</div>`;
    btn.addEventListener('click', () => selectNhCat(id));
    grid.appendChild(btn);
  });
})();

function selectNhCat(id) {
  nhSelectedCat = id;
  document.querySelectorAll('.nh-cat-btn').forEach(b => b.classList.toggle('sel', b.dataset.id === id));
  validateNh();
}

// â”€â”€ Slugify: Name â†’ ID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function slugify(text) {
  return text
    .toLowerCase()
    .replace(/Ã¤/g,'ae').replace(/Ã¶/g,'oe').replace(/Ã¼/g,'ue').replace(/ÃŸ/g,'ss')
    .replace(/[^a-z0-9\s-]/g, '')   // nur Buchstaben, Ziffern, Leerzeichen, Bindestriche
    .trim()
    .replace(/\s+/g, '-')           // Leerzeichen â†’ Bindestriche
    .replace(/-+/g, '-');           // mehrfache Bindestriche zusammenfassen
}

// â”€â”€ Eingabe-Events â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function onNhTitleInput() {
  const title = document.getElementById('nh-title-input').value;
  if (!nhIdManual) {
    document.getElementById('nh-id-input').value = slugify(title);
  }
  validateNh();
}

function onNhIdInput() {
  // Sobald der User die ID selbst Ã¤ndert, nicht mehr auto-Ã¼berschreiben
  nhIdManual = true;
  // Nur erlaubte Zeichen: a-z 0-9 -
  const input = document.getElementById('nh-id-input');
  input.value = input.value.toLowerCase().replace(/[^a-z0-9-]/g,'').replace(/-+/g,'-');
  validateNh();
}

// â”€â”€ Validation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function validateNh() {
  const title = document.getElementById('nh-title-input').value.trim();
  const id    = document.getElementById('nh-id-input').value.trim();
  const errEl = document.getElementById('nh-error');
  const btn   = document.getElementById('btn-generate');
  let errors  = [];

  if (!title)       errors.push('Bitte einen Handout-Namen eingeben.');
  if (!id)          errors.push('Die ID darf nicht leer sein.');
  if (id && !/^[a-z0-9][a-z0-9-]*[a-z0-9]?$/.test(id))
                    errors.push('Die ID darf nur aus Kleinbuchstaben, Ziffern und Bindestrichen bestehen (kein Anfangs-/Endstrich).');
  if (!nhSelectedCat) errors.push('Bitte eine Kategorie auswÃ¤hlen.');

  // PrÃ¼fen ob ID bereits existiert
  if (id && nhSelectedCat) {
    const exists = categoriesConfig[nhSelectedCat].handouts.some(h => h.id === id);
    if (exists) errors.push(`Die ID â€${id}" existiert bereits in der Kategorie â€${categoriesConfig[nhSelectedCat].title}".`);
  }

  if (errors.length) {
    errEl.textContent = errors[0];
    errEl.classList.add('visible');
    btn.disabled = true;
  } else {
    errEl.classList.remove('visible');
    btn.disabled = false;
  }
}

// â”€â”€ Code erzeugen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function generateCode() {
  const title = document.getElementById('nh-title-input').value.trim();
  const id    = document.getElementById('nh-id-input').value.trim();
  const cat   = nhSelectedCat;
  const cfg   = categoriesConfig[cat];

  // â”€â”€ 1) Code-Zeile â”€â”€
  const codeLine = `{id:'${id}', title:'${title}'}`;
  document.getElementById('nh-code-line').innerHTML =
    `<span class="c-new">${escHtml(codeLine)},</span>`;

  // â”€â”€ 2) Kontext: letzte 2 Handouts der Kategorie + neue Zeile + schlieÃŸendes ]} â”€â”€
  const handouts  = cfg.handouts;
  const lastTwo   = handouts.slice(-2);
  let contextHtml = '';
  contextHtml += `<span class="c-dim">'${cat}': { title: '${cfg.title}', handouts: [</span>\n`;
  contextHtml += `<span class="c-dim">    ...</span>\n`;
  lastTwo.forEach(h => {
    contextHtml += `<span class="c-dim">    {id:'${escHtml(h.id)}', title:'${escHtml(h.title)}'},</span>\n`;
  });
  contextHtml += `<span class="c-arrow">â†’  </span><span class="c-new">    {id:'${escHtml(id)}', title:'${escHtml(title)}'},</span>  <span class="c-dim">â† HIER einfÃ¼gen</span>\n`;
  contextHtml += `<span class="c-dim">  ]},</span>`;
  document.getElementById('nh-code-context').innerHTML = contextHtml;

  // â”€â”€ 3) Anleitung â”€â”€
  document.getElementById('nh-instructions').innerHTML = `
    <div class="nh-instr-title">ğŸ“– Wie einfÃ¼gen</div>
    <div class="instr-step">
      <div class="instr-num">1</div>
      <div class="instr-text">
        Ã–ffne deine <strong>index.html</strong> Datei.
      </div>
    </div>
    <div class="instr-step">
      <div class="instr-num">2</div>
      <div class="instr-text">
        Suche nach der Kategorie <code>categoriesConfig</code>.<br>
        <strong>Strg+F</strong> <br>
        Es sollte in Zeile 166 sein
      </div>
    </div>
    <div class="instr-step">
      <div class="instr-num">3</div>
      <div class="instr-text">
        Finde das <strong>letzte Handout</strong> in dieser Kategorie:<br>
        <code>{id:'${escHtml(handouts[handouts.length-1].id)}', title:'${escHtml(handouts[handouts.length-1].title)}'}</code>
      </div>
    </div>
    <div class="instr-step">
      <div class="instr-num">4</div>
      <div class="instr-text">
        Klicke <strong>nach dem Komma</strong> dieser Zeile, drÃ¼cke Enter und fÃ¼ge die neue Zeile ein:<br><br>
        <code style="color:#fff; background:rgba(139,92,246,0.2); padding:4px 10px; border-radius:5px; display:inline-block; margin-top:2px;">
          {id:'${escHtml(id)}', title:'${escHtml(title)}'},
        </code>
      </div>
    </div>
    <div class="instr-step">
      <div class="instr-num">5</div>
      <div class="instr-text">
        <strong>Speichere</strong> die Datei (Commit changes...) und aktualisiere die Seite im Browser â€“ das neue Handout sollte kurze Zeit spÃ¤ter auftauchen.
      </div>
    </div>
  `;

  show('nh-result');
}

// â”€â”€ Code kopieren â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function copyCode() {
  const title = document.getElementById('nh-title-input').value.trim();
  const id    = document.getElementById('nh-id-input').value.trim();
  const code  = `{id:'${id}', title:'${title}'},`;
  navigator.clipboard.writeText(code).then(() => {
    const btn = document.getElementById('btn-copy-code');
    btn.classList.add('copied');
    btn.textContent = 'âœ“ Kopiert!';
    setTimeout(() => { btn.classList.remove('copied'); btn.textContent = 'Kopieren'; }, 2000);
  });
}

// â”€â”€ HTML-Escape (Sicherheit) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function escHtml(s) {
  return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');
}
</script>

</body>
</html>
